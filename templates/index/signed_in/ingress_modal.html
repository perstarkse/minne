{% extends "modal_base.html" %}

{% block form_attributes %}
hx-post="/ingress-form"
enctype="multipart/form-data"
hx-target="#active_jobs_section"
hx-swap="outerHTML"
{% endblock %}

{% block modal_content %}
<h3 class="text-lg font-bold mb-4">Add new content</h3>

<div class="form-control">
  <label class="floating-label">
    <span>Instructions</span>
    <textarea name="instructions" class="textarea w-full validator"
      placeholder="Enter instructions for the AI here, help it understand what its seeing or how it should relate to the database"
      required>{{ instructions }}</textarea>
    <div class="validator-hint hidden">Instructions are required</div>
  </label>
</div>

<div class="form-control mt-4">
  <label class="floating-label">
    <span>Content</span>
    <textarea name="content" class="textarea input-bordered w-full"
      placeholder="Enter the content you want to ingress, it can be an URL or a text snippet">{{ content }}</textarea>
  </label>
</div>

<div class="form-control mt-4">
  <label class="floating-label">
    <span>Category</span>
    <input type="text" name="category" class="input input-bordered validator w-full" value="{{ category }}"
      list="category-list" required />
    <datalist id="category-list">
      {% for category in user_categories %}
      <option value="{{ category }}" />
      {% endfor %}
    </datalist>
    <div class="validator-hint hidden">Category is required</div>
  </label>
</div>

<div class="form-control mt-4">
  <label class="label label-text">Files</label>
  <input type="file" name="files" multiple class="file-input file-input-bordered w-full" />
</div>

<div id="error-message" class="text-error text-center {% if not error %}hidden{% endif %}">{{ error }}</div>
{% endblock %}

{% block primary_actions %}
<button type="submit" class="btn btn-primary">
  Save Changes
</button>
{% endblock %}